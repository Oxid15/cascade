
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuration management &#8212; cascade 0.15.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../styles/pydata-sphinx-theme.css?v=3ab4e28d" />
    <link rel="stylesheet" type="text/css" href="../copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../css/custom.css?v=9cb1bd10" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script src="../documentation_options.js?v=52d5597a"></script>
    <script src="../doctools.js?v=9a2dae69"></script>
    <script src="../sphinx_highlight.js?v=dc90522c"></script>
    <script src="../clipboard.min.js?v=a7894cd8"></script>
    <script src="../copybutton.js?v=f281be69"></script>
    <script src="../design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-KD8QDKDMD7"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KD8QDKDMD7');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KD8QDKDMD7');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/configuration';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://oxid15.github.io/cascade/en/latest/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'latest';
        </script>
    <link rel="icon" href="../logo_sq.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Experiment Management" href="advanced_experiment_management.html" />
    <link rel="prev" title="Tutorial" href="tutorials.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../logo_light.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../logo_dark.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
      <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      latest  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="tutorials.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../howtos/howtos.html">
                        How-to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../explanations/explanations.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../modules/modules.html">
                        API reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/oxid15/cascade" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/cascade_mlops" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="tutorials.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../howtos/howtos.html">
                        How-to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../explanations/explanations.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../modules/modules.html">
                        API reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/oxid15/cascade" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/cascade_mlops" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorial</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Configuration management</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_experiment_management.html">Advanced Experiment Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="results_querying.html">Experiment results querying</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="tutorials.html" class="nav-link">Tutorial</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Configuration management</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="configuration-management">
<h1>Configuration management<a class="headerlink" href="#configuration-management" title="Link to this heading">#</a></h1>
<p>Using <code class="docutils literal notranslate"><span class="pre">cascade.base.Config</span></code> class and <code class="docutils literal notranslate"><span class="pre">cascade</span> <span class="pre">run</span></code> CLI command you can:</p>
<ol class="arabic simple">
<li><p>Configure your scripts in code using class definitions</p></li>
<li><p>Override config values from CLI without modifying the code</p></li>
<li><p>Attach configs to models as special files</p></li>
<li><p>Capture and save script logs</p></li>
</ol>
<section id="script-config">
<h2>Script config<a class="headerlink" href="#script-config" title="Link to this heading">#</a></h2>
<p>Here is a sample script featuring a Config inside a file called <code class="docutils literal notranslate"><span class="pre">config_demo.py</span></code>.</p>
<p>To enable configuration you need to define a new class that inherits from <code class="docutils literal notranslate"><span class="pre">cascade.base.Config</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cascade.base</span> <span class="kn">import</span> <span class="n">Config</span>


<span class="k">class</span> <span class="nc">TrainConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">lr</span> <span class="o">=</span> <span class="mf">1e-6</span>
    <span class="n">batch_size</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">total_iterations</span> <span class="o">=</span> <span class="mi">10000</span>
    <span class="n">image_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">use_as_object</span><span class="p">(</span><span class="n">cfg</span><span class="p">:</span> <span class="n">TrainConfig</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;This config is for </span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">total_iterations</span><span class="si">}</span><span class="s2"> iterations&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">use_as_kwargs</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">,</span> <span class="n">total_iterations</span><span class="p">,</span> <span class="n">image_size</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image height is </span><span class="si">{</span><span class="n">image_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> and width is </span><span class="si">{</span><span class="n">image_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">TrainConfig</span><span class="p">()</span>

    <span class="n">use_as_object</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>

    <span class="n">use_as_kwargs</span><span class="p">(</span><span class="o">**</span><span class="n">cfg</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In the current implementation Cascade supports only one config object per file.
However this may change in the future versions.</p>
</div>
<p>Now you can leverage overrides without modifying the code using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cascade<span class="w"> </span>run<span class="w"> </span>config_demo.py<span class="w"> </span>--total_iterations<span class="w"> </span><span class="m">100</span><span class="w"> </span>--image_size<span class="w"> </span><span class="s1">&#39;(24, 24)&#39;</span>
</pre></div>
</div>
<p>This will display the current config and your overrides like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>You are about to run config_demo.py
The config is:
{&#39;batch_size&#39;: 16,
&#39;image_size&#39;: &#39;&lt;ast.Tuple object at 0x7955885466b0&gt;&#39;,
&#39;lr&#39;: 1e-06,
&#39;total_iterations&#39;: 10000}
The arguments you passed:
{&#39;image_size&#39;: (24, 24), &#39;total_iterations&#39;: 100}
Confirm? [y/N]:
</pre></div>
</div>
<p>After confirmation you should see:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This config is for 100 iterations
Image height is 24 and width is 24
</pre></div>
</div>
<p>In overrides you can use any python literal expressions. In other
words you can write simple things like exponentials <code class="docutils literal notranslate"><span class="pre">1e-10</span></code>,
passing <code class="docutils literal notranslate"><span class="pre">None</span></code> or other constants, but nothing that requires evaluation
or the use of variables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to launch scripts without confirmation just pass <cite>-y</cite> flag.</p>
</div>
</section>
<section id="configuration-tracking">
<h2>Configuration tracking<a class="headerlink" href="#configuration-tracking" title="Link to this heading">#</a></h2>
<p>Having the ability to override hardcoded values with CLI is great, but configs
need to be attached to actual experiments they belong to.
When we do <code class="docutils literal notranslate"><span class="pre">cascade</span> <span class="pre">run</span></code> it actually knows nothing about what kind of experiment is
inside the script. This means that you can use overrides separately even if you do not track
anything in your scripts. However, at the same time it creates tracking problems because only
<code class="docutils literal notranslate"><span class="pre">run</span></code> knows about overrides and logs and only the script knows about repos and lines.
To address this problem special <code class="docutils literal notranslate"><span class="pre">Model</span></code> methods come into play.</p>
<p>Let’s see next example, where we use special <code class="docutils literal notranslate"><span class="pre">add_config</span></code> method. Notice how
even while having the actual config in code we do not pass it directly to the method.
It is unnecessary since there is underlying communication between <code class="docutils literal notranslate"><span class="pre">run</span></code> and the script.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cascade.base</span> <span class="kn">import</span> <span class="n">Config</span>
<span class="kn">from</span> <span class="nn">cascade.lines</span> <span class="kn">import</span> <span class="n">ModelLine</span>
<span class="kn">from</span> <span class="nn">cascade.models</span> <span class="kn">import</span> <span class="n">BasicModel</span>


<span class="k">class</span> <span class="nc">TrainConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">lr</span> <span class="o">=</span> <span class="mf">1e-6</span>
    <span class="n">batch_size</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">total_iterations</span> <span class="o">=</span> <span class="mi">10000</span>
    <span class="n">image_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">TrainConfig</span><span class="p">()</span>

    <span class="n">line</span> <span class="o">=</span> <span class="n">ModelLine</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="n">BasicModel</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">create_model</span><span class="p">()</span>

    <span class="n">model</span><span class="o">.</span><span class="n">add_config</span><span class="p">()</span>

    <span class="n">line</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>You will find your configs at
<code class="docutils literal notranslate"><span class="pre">line/00000/files/cascade_config.json</span></code>
and overrides at <code class="docutils literal notranslate"><span class="pre">line/00000/files/cascade_overrides.json</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">run</span></code> creates temporary folder for every launch and stores everything there,
but only for the time script is executing. When you call <code class="docutils literal notranslate"><span class="pre">add_config</span></code> it remembers
the location of the file and saves it when <code class="docutils literal notranslate"><span class="pre">line.save</span></code> is called. The functionality is
very similar to <code class="docutils literal notranslate"><span class="pre">add_file</span></code> and under the hood it actually calls <code class="docutils literal notranslate"><span class="pre">add_file</span></code>.</p>
</div>
</section>
<section id="logs-tracking">
<h2>Logs tracking<a class="headerlink" href="#logs-tracking" title="Link to this heading">#</a></h2>
<p>Another useful feature of <code class="docutils literal notranslate"><span class="pre">run</span></code> is log tracking. Logs are captured line by line and immediately displayed
just as if you would run the script regularly. While displaying logs <code class="docutils literal notranslate"><span class="pre">cascade</span></code> also writes them
into the same temporary folder as configs.</p>
<p>Logs tracking is not enabled by default and can be turned on by adding <code class="docutils literal notranslate"><span class="pre">--log</span></code> anywhere after <code class="docutils literal notranslate"><span class="pre">cascade</span> <span class="pre">run</span></code> command.</p>
</section>
<section id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Link to this heading">#</a></h2>
<p>Logs and configs are saved when <code class="docutils literal notranslate"><span class="pre">line.save</span></code> is called, but what if an error will occur before that moment?
This will almost always be the case - something may go wrong in the script and <code class="docutils literal notranslate"><span class="pre">save</span></code> will never be called.
This is why <code class="docutils literal notranslate"><span class="pre">run</span></code> will not delete temporary folder if an error occurs.
Let’s see an example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cascade.base</span> <span class="kn">import</span> <span class="n">Config</span>


<span class="k">class</span> <span class="nc">TestConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Script is running&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;An error occured!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We will run the code above with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cascade<span class="w"> </span>run<span class="w"> </span>run_error_handling<span class="w"> </span>-y<span class="w"> </span>--log
</pre></div>
</div>
<p>Skipping the long trackeback this is what you should see:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cascade.cli.run.RunFailedException: Run of run_error_handling.py failed.
See traceback above. The config and logs will be kept at
/home/ilia/local/cascade_proj/cascade_repo/cascade/docs/source/tutorials/.cascade/20241117_154453_72
for post-mortem analysis
</pre></div>
</div>
<p>This is what you should find in <code class="docutils literal notranslate"><span class="pre">.cascade/20241117_154453_72/logs/cascade_run.log</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Script is running
Traceback (most recent call last):
File &quot;&lt;string&gt;&quot;, line 10, in &lt;module&gt;
RuntimeError: An error occured!
</pre></div>
</div>
<p>You will also find config and overrides in <code class="docutils literal notranslate"><span class="pre">.cascade</span></code> folder.</p>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="tutorials.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced_experiment_management.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Advanced Experiment Management</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#script-config">Script config</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-tracking">Configuration tracking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logs-tracking">Logs tracking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#error-handling">Error handling</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/tutorials/configuration.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022-2025, Ilia Moiseev.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>